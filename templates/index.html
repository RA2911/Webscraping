<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sentiment Intelligence</title>
  <link rel="stylesheet" href="/static/styles.css"/>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
</head>
<body>
  <div class="bg"></div>

  <header class="topbar">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <div class="title">Sentiment Intelligence</div>
        <div class="subtitle">Futuristic, multi-source, automated</div>
      </div>
    </div>

    <nav class="menu">
      <button class="btn ghost" id="btnExport">Download Dashboard (ZIP)</button>
      <a class="btn ghost" id="btnTxt" href="/download/txt" target="_blank">Download TXT (optional)</a>
    </nav>
  </header>

  <main class="container">
    <section class="panel">
      <div class="panelHead">
        <h2>Run Intelligence</h2>
        <div class="chips" id="chips"></div>
      </div>

      <div class="formRow">
        <div class="field">
          <label>Company Name</label>
          <input id="company" placeholder="e.g., Tesla, Starbucks, Emirates NBD"/>
        </div>

        <div class="field">
          <label>Hints (optional)</label>
          <input id="hints" placeholder="e.g., UAE, customer service, delivery, workplace…"/>
        </div>

        <div class="field small">
          <label>Max Links</label>
          <input id="maxLinks" type="number" min="6" max="20" value="12"/>
        </div>

        <button class="btn primary" id="btnRun">Run Intelligence</button>
      </div>

      <div class="progressWrap">
        <div class="progressMeta">
          <span id="stepText">Idle</span>
          <span id="progressText">0%</span>
        </div>
        <div class="progressBar">
          <div class="progressFill" id="progressFill"></div>
        </div>
      </div>

      <div class="linksGrid">
        <div class="miniCard">
          <div class="miniTitle">Discovered Links</div>
          <div class="miniValue" id="linksCount">0</div>
        </div>
        <div class="miniCard">
          <div class="miniTitle">Accessible Sources</div>
          <div class="miniValue" id="okCount">0</div>
        </div>
        <div class="miniCard">
          <div class="miniTitle">Blocked / Errors</div>
          <div class="miniValue" id="badCount">0</div>
        </div>
        <div class="miniCard glow">
          <div class="miniTitle">Overall Sentiment Rate</div>
          <div class="miniValue" id="sentimentRate">—</div>
        </div>
      </div>
    </section>

    <section class="grid2">
      <section class="panel">
        <div class="panelHead">
          <h2>Master KPIs</h2>
          <div class="hint">Click a box to open details</div>
        </div>
        <div class="kpiGrid" id="kpiGrid"></div>
      </section>

      <section class="panel" id="chartsPanel">
        <div class="panelHead">
          <h2>Charts</h2>
          <div class="hint">Downloads preserve these colors</div>
        </div>
        <div class="chartRow">
          <div class="chartBox" id="chartSentDist"></div>
          <div class="chartBox" id="chartRateGauge"></div>
        </div>
      </section>
    </section>

    <section class="panel">
      <div class="panelHead">
        <h2>Sources Preview</h2>
        <div class="hint">Blocked sites are shown as blocked (no bypass)</div>
      </div>
      <div class="sourceList" id="sourceList"></div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <div class="modalTitle" id="modalTitle">KPI</div>
          <div class="modalSub" id="modalSub">Details</div>
        </div>
        <button class="btn ghost" id="modalClose">Close</button>
      </div>
      <div class="modalBody" id="modalBody"></div>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
